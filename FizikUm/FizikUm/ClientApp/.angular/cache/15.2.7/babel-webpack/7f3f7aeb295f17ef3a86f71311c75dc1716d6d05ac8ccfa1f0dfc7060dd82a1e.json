{"ast":null,"code":"import { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"D:/FizikUm/FizikUm/FizikUm/ClientApp/src/api-authorization/authorize.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ResourceComponent_div_5_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"strong\");\n    i0.ɵɵtext(6, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"strong\");\n    i0.ɵɵtext(10, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementStart(13, \"button\", 0);\n    i0.ɵɵlistener(\"click\", function ResourceComponent_div_5_li_4_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const resource_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.showView(\"edit\", resource_r4));\n    });\n    i0.ɵɵtext(14, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 0);\n    i0.ɵɵlistener(\"click\", function ResourceComponent_div_5_li_4_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.deleteResource(ctx_r7.selectedResource == null ? null : ctx_r7.selectedResource.resourceId));\n    });\n    i0.ɵɵtext(16, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const resource_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", resource_r4.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", resource_r4.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", resource_r4.code, \"\");\n  }\n}\nfunction ResourceComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2, \"Resources\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, ResourceComponent_div_5_li_4_Template, 17, 3, \"li\", 2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.resources);\n  }\n}\nfunction ResourceComponent_div_6_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const classroom_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", classroom_r9.classroomId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(classroom_r9.name);\n  }\n}\nfunction ResourceComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"h3\");\n    i0.ɵɵtext(3, \"Add New Resource\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function ResourceComponent_div_6_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.addResource());\n    });\n    i0.ɵɵelementStart(5, \"label\", 4);\n    i0.ɵɵtext(6, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.newResource.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"label\", 6);\n    i0.ɵɵtext(9, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"textarea\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_textarea_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.newResource.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 8);\n    i0.ɵɵtext(12, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.newResource.code = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"label\", 10);\n    i0.ɵɵtext(15, \"Classroom:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"select\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_select_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.newResource.selectedClassroomId = $event);\n    });\n    i0.ɵɵtemplate(17, ResourceComponent_div_6_option_17_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 13);\n    i0.ɵɵtext(19, \"Add Resource\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.code);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.selectedClassroomId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.classrooms);\n  }\n}\nfunction ResourceComponent_div_7_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function ResourceComponent_div_7_form_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.updateResource(ctx_r17.selectedResource.resourceId, ctx_r17.selectedResource));\n    });\n    i0.ɵɵelementStart(1, \"label\", 4);\n    i0.ɵɵtext(2, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_7_form_3_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.selectedResource.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 6);\n    i0.ɵɵtext(5, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"textarea\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_7_form_3_Template_textarea_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.selectedResource.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 8);\n    i0.ɵɵtext(8, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_7_form_3_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.selectedResource.code = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 13);\n    i0.ɵɵtext(11, \"Save Changes\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r16.selectedResource.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r16.selectedResource.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r16.selectedResource.code);\n  }\n}\nfunction ResourceComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Edit Resource View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ResourceComponent_div_7_form_3_Template, 12, 3, \"form\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedResource);\n  }\n}\nexport class ResourceComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.resources = [];\n    this.classrooms = [];\n    this.newResource = this.getEmptyResource();\n    // Add the selectedResource property\n    this.selectedResource = null;\n    this.currentView = 'index';\n    this.apiUrl = 'https://localhost:7175/Resource/api/';\n  }\n  ngOnInit() {\n    this.getResources();\n    this.getClassrooms();\n  }\n  getClassrooms() {\n    // Fetch the list of existing classrooms from your API\n    this.http.get(`https://localhost:7175/Classroom/api/GetClassroom`).subscribe(result => this.classrooms = result, error => console.error('Error fetching classrooms:', error));\n  }\n  showView(view, resource) {\n    this.currentView = view;\n    if (view === 'index') {\n      this.getResources();\n    }\n    if (view === 'edit' && resource) {\n      this.selectedResource = {\n        ...resource\n      };\n    }\n  }\n  getResources() {\n    this.http.get(`${this.apiUrl}GetResources`).subscribe(result => this.resources = result, error => console.error('Error fetching resources:', error));\n  }\n  addResource() {\n    this.authService.getUser().pipe(take(1)).subscribe(user => {\n      this.newResource.createdBy = user?.name ?? null;\n      // Find the selected classroom based on selectedClassroomId\n      const selectedClassroom = this.classrooms.find(c => c.classroomId === this.newResource.selectedClassroomId);\n      if (selectedClassroom) {\n        // Set the classroomId to the selected classroom's id\n        this.newResource.classroomId = selectedClassroom.classroomId + 1;\n        this.http.post(`${this.apiUrl}PostResource`, this.newResource).subscribe(result => {\n          result.classroomId = selectedClassroom.classroomId;\n          this.resources.push(result);\n          this.resetNewResource();\n        }, error => console.error('Error adding resource:', error));\n      } else {\n        console.error('Selected classroom not found');\n      }\n    }, error => console.error('Error fetching user:', error));\n  }\n  updateResource(id, resource) {\n    this.http.put(`${this.apiUrl}PutResource/${id}`, resource).subscribe(() => {\n      // Optional: Handle success, e.g., show a message\n    }, error => console.error('Error updating resource:', error));\n  }\n  deleteResource(id) {\n    this.http.delete(`${this.apiUrl}DeleteResource/${id}`).subscribe(() => {\n      this.resources = this.resources.filter(r => r.resourceId !== id);\n    }, error => console.error('Error deleting resource:', error));\n  }\n  resetNewResource() {\n    this.newResource = this.getEmptyResource();\n  }\n  getEmptyResource() {\n    return {\n      resourceId: 0,\n      name: '',\n      description: '',\n      classroomId: 0,\n      code: '',\n      createdBy: ''\n    };\n  }\n}\nResourceComponent.ɵfac = function ResourceComponent_Factory(t) {\n  return new (t || ResourceComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthorizeService));\n};\nResourceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResourceComponent,\n  selectors: [[\"app-resource\"]],\n  decls: 8,\n  vars: 3,\n  consts: [[3, \"click\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngSubmit\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"code\"], [\"type\", \"text\", \"id\", \"code\", \"name\", \"code\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"classroomId\"], [\"id\", \"classroomId\", \"name\", \"classroomId\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [3, \"ngValue\"], [3, \"ngSubmit\", 4, \"ngIf\"]],\n  template: function ResourceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\")(1, \"a\", 0);\n      i0.ɵɵlistener(\"click\", function ResourceComponent_Template_a_click_1_listener() {\n        return ctx.showView(\"index\");\n      });\n      i0.ɵɵtext(2, \"Index\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"a\", 0);\n      i0.ɵɵlistener(\"click\", function ResourceComponent_Template_a_click_3_listener() {\n        return ctx.showView(\"create\");\n      });\n      i0.ɵɵtext(4, \"Create\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, ResourceComponent_div_5_Template, 5, 1, \"div\", 1);\n      i0.ɵɵtemplate(6, ResourceComponent_div_6_Template, 20, 5, \"div\", 1);\n      i0.ɵɵtemplate(7, ResourceComponent_div_7_Template, 4, 1, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"index\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"create\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"edit\");\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["take","i0","ResourceComponent","constructor","http","authService","getEmptyResource","ngOnInit","getResources","getClassrooms","get","subscribe","result","classrooms","error","console","showView","view","resource","currentView","selectedResource","apiUrl","resources","addResource","getUser","pipe","user","newResource","createdBy","name","selectedClassroom","find","c","classroomId","selectedClassroomId","post","push","resetNewResource","updateResource","id","put","deleteResource","delete","filter","r","resourceId","description","code","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\FizikUm\\FizikUm\\FizikUm\\ClientApp\\src\\app\\resource\\resource.component.ts","D:\\FizikUm\\FizikUm\\FizikUm\\ClientApp\\src\\app\\resource\\resource.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthorizeService } from 'D:/FizikUm/FizikUm/FizikUm/ClientApp/src/api-authorization/authorize.service';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-resource',\n  templateUrl: './resource.component.html',\n  styleUrls: ['./resource.component.css']\n})\nexport class ResourceComponent implements OnInit {\n  public resources: Resource[] = [];\n  public classrooms: Classroom[] = [];\n  public newResource: Resource = this.getEmptyResource();\n\n  // Add the selectedResource property\n  public selectedResource: Resource | null = null;\n\n  currentView: string = 'index';\n\n  constructor(private http: HttpClient, private authService: AuthorizeService) { }\n\n  ngOnInit(): void {\n    this.getResources();\n    this.getClassrooms();\n  }\n\n  getClassrooms() {\n    // Fetch the list of existing classrooms from your API\n    this.http.get<Classroom[]>(`https://localhost:7175/Classroom/api/GetClassroom`).subscribe(\n      result => this.classrooms = result,\n      error => console.error('Error fetching classrooms:', error)\n    );\n  }\n\n  showView(view: string, resource?: Resource) {\n    this.currentView = view;\n\n    if (view === 'index') {\n      this.getResources();\n    }\n\n    if (view === 'edit' && resource) {\n      this.selectedResource = { ...resource };\n    }\n  }\n\n  private apiUrl = 'https://localhost:7175/Resource/api/';\n\n  getResources() {\n    this.http.get<Resource[]>(`${this.apiUrl}GetResources`).subscribe(\n      result => this.resources = result,\n      error => console.error('Error fetching resources:', error)\n    );\n  }\n\n  addResource() {\n    this.authService.getUser().pipe(take(1)).subscribe(\n      user => {\n        this.newResource.createdBy = user?.name ?? null;\n\n        // Find the selected classroom based on selectedClassroomId\n        const selectedClassroom = this.classrooms.find(c => c.classroomId === this.newResource.selectedClassroomId);\n\n        if (selectedClassroom) {\n          // Set the classroomId to the selected classroom's id\n          this.newResource.classroomId = selectedClassroom.classroomId+1;\n\n          this.http.post<Resource>(`${this.apiUrl}PostResource`, this.newResource).subscribe(\n            result => {\n              result.classroomId = selectedClassroom.classroomId;\n              this.resources.push(result);\n              this.resetNewResource();\n            },\n            error => console.error('Error adding resource:', error)\n          );\n        } else {\n          console.error('Selected classroom not found');\n        }\n      },\n      error => console.error('Error fetching user:', error)\n    );\n  }\n\n  updateResource(id: number, resource: Resource) {\n    this.http.put(`${this.apiUrl}PutResource/${id}`, resource).subscribe(\n      () => {\n        // Optional: Handle success, e.g., show a message\n      },\n      error => console.error('Error updating resource:', error)\n    );\n  }\n\n  deleteResource(id: number | undefined) {\n    this.http.delete(`${this.apiUrl}DeleteResource/${id}`).subscribe(\n      () => {\n        this.resources = this.resources.filter(r => r.resourceId !== id);\n      },\n      error => console.error('Error deleting resource:', error)\n    );\n  }\n\n  private resetNewResource() {\n    this.newResource = this.getEmptyResource();\n  }\n\n  private getEmptyResource(): Resource {\n    return {\n      resourceId: 0,\n      name: '',\n      description: '',\n      classroomId: 0,\n      code: '',\n      createdBy: ''\n    };\n  }\n}\n\ninterface Resource {\n  resourceId: number;\n  name: string;\n  description: string;\n  code: string;\n  classroomId: number;\n  createdBy: string | null;\n  selectedClassroomId?: number;\n}\n\ninterface SubjectCategory {\n  subjectCategoryId: number;\n  name: string;\n}\n\ninterface Classroom {\n  classroomId: number;\n  name: string;\n  subjectCategoryId: number;\n  subjectCategory: SubjectCategory;\n  resources: Resource[];\n}\n","<nav>\n  <a (click)=\"showView('index')\">Index</a>\n  <a (click)=\"showView('create')\">Create</a>\n</nav>\n\n<div *ngIf=\"currentView === 'index'\">\n  <h2>Resources</h2>\n\n  <ul>\n    <li *ngFor=\"let resource of resources\">\n      <strong>Name:</strong> {{ resource.name }}<br>\n      <strong>Description:</strong> {{ resource.description }}<br>\n      <strong>Code:</strong> {{ resource.code }}<br>\n\n      <button (click)=\"showView('edit', resource)\">Edit</button>\n      <button (click)=\"deleteResource(selectedResource?.resourceId)\">Delete</button>\n\n    </li>\n  </ul>\n</div>\n\n<div *ngIf=\"currentView === 'create'\">\n  <div>\n    <h3>Add New Resource</h3>\n    <form (ngSubmit)=\"addResource()\">\n      <label for=\"name\">Name:</label>\n      <input type=\"text\" id=\"name\" name=\"name\" [(ngModel)]=\"newResource.name\" required>\n\n      <label for=\"description\">Description:</label>\n      <textarea id=\"description\" name=\"description\" [(ngModel)]=\"newResource.description\" required></textarea>\n\n      <label for=\"code\">Code:</label>\n      <input type=\"text\" id=\"code\" name=\"code\" [(ngModel)]=\"newResource.code\" required>\n\n      <label for=\"classroomId\">Classroom:</label>\n      <select id=\"classroomId\" [(ngModel)]=\"newResource.selectedClassroomId\" name=\"classroomId\">\n        <option *ngFor=\"let classroom of classrooms\" [ngValue]=\"classroom.classroomId\">{{ classroom.name }}</option>\n      </select>\n      <button type=\"submit\">Add Resource</button>\n    </form>\n  </div>\n</div>\n\n<div *ngIf=\"currentView === 'edit'\">\n  <p>Edit Resource View</p>\n  <form *ngIf=\"selectedResource\" (ngSubmit)=\"updateResource(selectedResource.resourceId, selectedResource)\">\n    <label for=\"name\">Name:</label>\n    <input type=\"text\" id=\"name\" name=\"name\" [(ngModel)]=\"selectedResource.name\" required>\n\n    <label for=\"description\">Description:</label>\n    <textarea id=\"description\" name=\"description\" [(ngModel)]=\"selectedResource.description\" required></textarea>\n\n    <label for=\"code\">Code:</label>\n    <input type=\"text\" id=\"code\" name=\"code\" [(ngModel)]=\"selectedResource.code\" required>\n\n    <button type=\"submit\">Save Changes</button>\n  </form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}