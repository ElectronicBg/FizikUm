{"ast":null,"code":"import { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"D:/FizikUm/FizikUm/FizikUm/ClientApp/src/api-authorization/authorize.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ResourceComponent_div_5_div_4_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"strong\");\n    i0.ɵɵtext(2, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"strong\");\n    i0.ɵɵtext(6, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"strong\");\n    i0.ɵɵtext(10, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementStart(13, \"button\", 0);\n    i0.ɵɵlistener(\"click\", function ResourceComponent_div_5_div_4_div_3_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const resource_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.showView(\"edit\", resource_r6));\n    });\n    i0.ɵɵtext(14, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 0);\n    i0.ɵɵlistener(\"click\", function ResourceComponent_div_5_div_4_div_3_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const resource_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.deleteResource(resource_r6.id));\n    });\n    i0.ɵɵtext(16, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const resource_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", resource_r6.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", resource_r6.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", resource_r6.code, \"\");\n  }\n}\nfunction ResourceComponent_div_5_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ResourceComponent_div_5_div_4_div_3_Template, 17, 3, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const classroom_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(classroom_r4.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.getResourcesByClassroomId(classroom_r4.id));\n  }\n}\nfunction ResourceComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2, \"Resources\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵtemplate(4, ResourceComponent_div_5_div_4_Template, 4, 2, \"div\", 3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.classrooms);\n  }\n}\nfunction ResourceComponent_div_6_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const classroom_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", classroom_r11.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(classroom_r11.name);\n  }\n}\nfunction ResourceComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 6)(2, \"h3\");\n    i0.ɵɵtext(3, \"Add New Resource\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function ResourceComponent_div_6_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.addResource());\n    });\n    i0.ɵɵelementStart(5, \"label\", 8);\n    i0.ɵɵtext(6, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.newResource.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"label\", 10);\n    i0.ɵɵtext(9, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"textarea\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_textarea_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.newResource.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 12);\n    i0.ɵɵtext(12, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.newResource.code = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"label\", 14);\n    i0.ɵɵtext(15, \"Classroom:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"select\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_6_Template_select_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.newResource.selectedClassroomId = $event);\n    });\n    i0.ɵɵtemplate(17, ResourceComponent_div_6_option_17_Template, 2, 2, \"option\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 17);\n    i0.ɵɵtext(19, \"Add Resource\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.code);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newResource.selectedClassroomId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.classrooms);\n  }\n}\nfunction ResourceComponent_div_7_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function ResourceComponent_div_7_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.updateResource(ctx_r19.selectedResource.id, ctx_r19.selectedResource));\n    });\n    i0.ɵɵelementStart(1, \"label\", 8);\n    i0.ɵɵtext(2, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_7_form_4_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.selectedResource.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 10);\n    i0.ɵɵtext(5, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"textarea\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_7_form_4_Template_textarea_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.selectedResource.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 12);\n    i0.ɵɵtext(8, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function ResourceComponent_div_7_form_4_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.selectedResource.code = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 17);\n    i0.ɵɵtext(11, \"Save Changes\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r18.selectedResource.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r18.selectedResource.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r18.selectedResource.code);\n  }\n}\nfunction ResourceComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 6)(2, \"p\");\n    i0.ɵɵtext(3, \"Edit Resource View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ResourceComponent_div_7_form_4_Template, 12, 3, \"form\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedResource);\n  }\n}\nexport class ResourceComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.resources = [];\n    this.classrooms = [];\n    this.newResource = this.getEmptyResource();\n    // Add the selectedResource property\n    this.selectedResource = null;\n    this.currentView = 'index';\n    this.apiUrl = 'https://localhost:7175/Resource/api/';\n  }\n  ngOnInit() {\n    this.getResources();\n    this.getClassrooms();\n  }\n  getClassrooms() {\n    // Fetch the list of existing classrooms from your API\n    this.http.get(`https://localhost:7175/Classroom/api/GetClassroom`).subscribe(result => this.classrooms = result, error => console.error('Error fetching classrooms:', error));\n  }\n  showView(view, resource) {\n    this.currentView = view;\n    if (view === 'index') {\n      this.getResources();\n    }\n    if (view === 'edit' && resource) {\n      this.selectedResource = {\n        ...resource\n      };\n    }\n  }\n  getResources() {\n    this.http.get(`${this.apiUrl}GetResources`).subscribe(result => this.resources = result, error => console.error('Error fetching resources:', error));\n  }\n  addResource() {\n    this.authService.getUser().pipe(take(1)).subscribe(user => {\n      this.newResource.createdBy = user?.name ?? null;\n      const selectedClassroomId = this.newResource.selectedClassroomId;\n      // Find the selected classroom based on selectedClassroomId\n      const selectedClassroom = this.classrooms.find(c => c.id === selectedClassroomId);\n      if (selectedClassroom) {\n        // Set the classroomId to the selected classroom's id\n        this.newResource.classroomId = selectedClassroom.id;\n        console.log('Selected Classroom ID:', this.newResource.selectedClassroomId);\n        this.http.post(`${this.apiUrl}PostResource`, this.newResource).subscribe(result => {\n          result.classroomId = selectedClassroom.id;\n          this.resources.push(result);\n          this.resetNewResource();\n        }, error => console.error('Error adding resource:', error));\n      } else {\n        console.error('Selected classroom not found');\n      }\n    }, error => console.error('Error fetching user:', error));\n  }\n  updateResource(id, Resource) {\n    this.http.put(`${this.apiUrl}PutResource/${id}`, Resource).subscribe(() => {}, error => console.error('Error updating resource:', error));\n  }\n  deleteResource(id) {\n    if (id === undefined) {\n      return;\n    }\n    this.http.delete(`${this.apiUrl}DeleteResource/${id}`).subscribe(() => {\n      this.resources = this.resources.filter(r => r.id !== id);\n    }, error => console.error('Error deleting resource:', error));\n  }\n  getResourcesByClassroomId(classroomId) {\n    return this.resources.filter(resource => resource.classroomId === classroomId);\n  }\n  resetNewResource() {\n    this.newResource = this.getEmptyResource();\n  }\n  getEmptyResource() {\n    return {\n      id: 0,\n      name: '',\n      description: '',\n      classroomId: 0,\n      code: '',\n      createdBy: ''\n    };\n  }\n}\nResourceComponent.ɵfac = function ResourceComponent_Factory(t) {\n  return new (t || ResourceComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthorizeService));\n};\nResourceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResourceComponent,\n  selectors: [[\"app-resource\"]],\n  decls: 8,\n  vars: 3,\n  consts: [[3, \"click\"], [4, \"ngIf\"], [1, \"resources-container\"], [\"class\", \"classroom-section\", 4, \"ngFor\", \"ngForOf\"], [1, \"classroom-section\"], [\"class\", \"resource-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"resource-card\"], [3, \"ngSubmit\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"code\"], [\"type\", \"text\", \"id\", \"code\", \"name\", \"code\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"classroomId\"], [\"id\", \"classroomId\", \"name\", \"classroomId\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [3, \"ngValue\"], [3, \"ngSubmit\", 4, \"ngIf\"]],\n  template: function ResourceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\")(1, \"a\", 0);\n      i0.ɵɵlistener(\"click\", function ResourceComponent_Template_a_click_1_listener() {\n        return ctx.showView(\"index\");\n      });\n      i0.ɵɵtext(2, \"Index\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"a\", 0);\n      i0.ɵɵlistener(\"click\", function ResourceComponent_Template_a_click_3_listener() {\n        return ctx.showView(\"create\");\n      });\n      i0.ɵɵtext(4, \"Create\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, ResourceComponent_div_5_Template, 5, 1, \"div\", 1);\n      i0.ɵɵtemplate(6, ResourceComponent_div_6_Template, 20, 5, \"div\", 1);\n      i0.ɵɵtemplate(7, ResourceComponent_div_7_Template, 5, 1, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"index\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"create\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"edit\");\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\"body[_ngcontent-%COMP%] {\\r\\n  font-family: Arial, sans-serif;\\r\\n  margin: 20px;\\r\\n}\\r\\n\\r\\nnav[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n  nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n    text-decoration: none;\\r\\n    padding: 8px 12px;\\r\\n    margin-right: 10px;\\r\\n    background-color: #3498db;\\r\\n    color: #fff;\\r\\n    border-radius: 5px;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n\\r\\n.resources-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-wrap: wrap;\\r\\n  justify-content: space-between;\\r\\n}\\r\\n\\r\\n.resource-card[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  max-width: 300px;\\r\\n  margin: 10px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 8px;\\r\\n  padding: 15px;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  background-color: #2ecc71;\\r\\n  color: #fff;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  margin-right: 5px;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n  button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #27ae60;\\r\\n  }\\r\\n\\r\\nform[_ngcontent-%COMP%] {\\r\\n  margin-top: 15px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcmVzb3VyY2UvcmVzb3VyY2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDhCQUE4QjtFQUM5QixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0VBRUU7SUFDRSxxQkFBcUI7SUFDckIsaUJBQWlCO0lBQ2pCLGtCQUFrQjtJQUNsQix5QkFBeUI7SUFDekIsV0FBVztJQUNYLGtCQUFrQjtJQUNsQixlQUFlO0VBQ2pCOztBQUVGO0VBQ0UsYUFBYTtFQUNiLGVBQWU7RUFDZiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxPQUFPO0VBQ1AsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0VBRUU7SUFDRSx5QkFBeUI7RUFDM0I7O0FBRUY7RUFDRSxnQkFBZ0I7QUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcclxuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgbWFyZ2luOiAyMHB4O1xyXG59XHJcblxyXG5uYXYge1xyXG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbn1cclxuXHJcbiAgbmF2IGEge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgcGFkZGluZzogOHB4IDEycHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ5OGRiO1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgfVxyXG5cclxuLnJlc291cmNlcy1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC13cmFwOiB3cmFwO1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxufVxyXG5cclxuLnJlc291cmNlLWNhcmQge1xyXG4gIGZsZXg6IDE7XHJcbiAgbWF4LXdpZHRoOiAzMDBweDtcclxuICBtYXJnaW46IDEwcHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgcGFkZGluZzogMTVweDtcclxufVxyXG5cclxuYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmVjYzcxO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiA4cHggMTJweDtcclxuICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4gIGJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjdhZTYwO1xyXG4gIH1cclxuXHJcbmZvcm0ge1xyXG4gIG1hcmdpbi10b3A6IDE1cHg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nvar Subject;\n(function (Subject) {\n  Subject[Subject[\"Physics\"] = 0] = \"Physics\";\n  Subject[Subject[\"Biology\"] = 1] = \"Biology\";\n  Subject[Subject[\"Chemistry\"] = 2] = \"Chemistry\";\n})(Subject || (Subject = {}));","map":{"version":3,"mappings":"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","names":["take","i0","ResourceComponent","constructor","http","authService","getEmptyResource","ngOnInit","getResources","getClassrooms","get","subscribe","result","classrooms","error","console","showView","view","resource","currentView","selectedResource","apiUrl","resources","addResource","getUser","pipe","user","newResource","createdBy","name","selectedClassroomId","selectedClassroom","find","c","id","classroomId","log","post","push","resetNewResource","updateResource","Resource","put","deleteResource","undefined","delete","filter","r","getResourcesByClassroomId","description","code","selectors","decls","vars","consts","template","ctx","Subject"],"sourceRoot":"","sources":["D:\\FizikUm\\FizikUm\\FizikUm\\ClientApp\\src\\app\\resource\\resource.component.ts","D:\\FizikUm\\FizikUm\\FizikUm\\ClientApp\\src\\app\\resource\\resource.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthorizeService } from 'D:/FizikUm/FizikUm/FizikUm/ClientApp/src/api-authorization/authorize.service';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-resource',\n  templateUrl: './resource.component.html',\n  styleUrls: ['./resource.component.css']\n})\nexport class ResourceComponent implements OnInit {\n  public resources: Resource[] = [];\n  public classrooms: Classroom[] = [];\n  public newResource: Resource = this.getEmptyResource();\n\n  // Add the selectedResource property\n  public selectedResource: Resource | null = null;\n\n  currentView: string = 'index';\n\n  constructor(private http: HttpClient, private authService: AuthorizeService) { }\n\n  ngOnInit(): void {\n    this.getResources();\n    this.getClassrooms();\n  }\n\n  getClassrooms() {\n    // Fetch the list of existing classrooms from your API\n    this.http.get<Classroom[]>(`https://localhost:7175/Classroom/api/GetClassroom`).subscribe(\n      result => this.classrooms = result,\n      error => console.error('Error fetching classrooms:', error)\n    );\n  }\n\n  showView(view: string, resource?: Resource) {\n    this.currentView = view;\n\n    if (view === 'index') {\n      this.getResources();\n    }\n\n    if (view === 'edit' && resource) {\n      this.selectedResource = { ...resource };\n    }\n  }\n\n  private apiUrl = 'https://localhost:7175/Resource/api/';\n\n  getResources() {\n    this.http.get<Resource[]>(`${this.apiUrl}GetResources`).subscribe(\n      result => this.resources = result,\n      error => console.error('Error fetching resources:', error)\n    );\n  }\n\n  addResource() {\n    this.authService.getUser().pipe(take(1)).subscribe(\n      user => {\n        this.newResource.createdBy = user?.name ?? null;\n       \n        const selectedClassroomId = this.newResource.selectedClassroomId;\n\n        // Find the selected classroom based on selectedClassroomId\n        const selectedClassroom = this.classrooms.find(c => c.id === selectedClassroomId);\n\n        if (selectedClassroom) {\n          // Set the classroomId to the selected classroom's id\n          this.newResource.classroomId = selectedClassroom.id;\n          console.log('Selected Classroom ID:', this.newResource.selectedClassroomId);\n\n          this.http.post<Resource>(`${this.apiUrl}PostResource`, this.newResource).subscribe(\n            result => {\n              result.classroomId = selectedClassroom.id;\n              this.resources.push(result);\n              this.resetNewResource();\n            },\n            error => console.error('Error adding resource:', error)\n          );\n        } else {\n          console.error('Selected classroom not found');\n        }\n      },\n      error => console.error('Error fetching user:', error)\n    );\n  }\n\n  updateResource(id: number, Resource: Resource) {\n    this.http.put(`${this.apiUrl}PutResource/${id}`, Resource).subscribe(\n      () => {\n      },\n      error => console.error('Error updating resource:', error)\n    );\n  }\n\n  deleteResource(id: number | undefined) {\n    if (id === undefined) {   \n      return;\n    }\n\n    this.http.delete(`${this.apiUrl}DeleteResource/${id}`).subscribe(\n      () => {\n        this.resources = this.resources.filter(r => r.id !== id);\n      },\n      error => console.error('Error deleting resource:', error)\n    );\n  }\n\n  getResourcesByClassroomId(classroomId: number): Resource[] {\n    return this.resources.filter(resource => resource.classroomId === classroomId);\n  }\n\n  private resetNewResource() {\n    this.newResource = this.getEmptyResource();\n  }\n\n  private getEmptyResource(): Resource {\n    return {\n      id: 0,\n      name: '',\n      description: '',\n      classroomId: 0,\n      code: '',\n      createdBy: ''\n    };\n  }\n}\n\ninterface Resource {\n  id: number;\n  name: string;\n  description: string;\n  code: string;\n  classroomId: number;\n  createdBy: string | null;\n  selectedClassroomId?: number;\n}\n\nenum Subject {\n  Physics = 0,\n  Biology = 1,\n  Chemistry = 2,\n}\n\ninterface Classroom {\n  id: number;\n  name: string;\n  subject: Subject;\n  teacher: string | null;\n  resources: Resource[];\n}\n","<nav>\r\n  <a (click)=\"showView('index')\">Index</a>\r\n  <a (click)=\"showView('create')\">Create</a>\r\n</nav>\r\n\r\n<div *ngIf=\"currentView === 'index'\">\r\n  <h2>Resources</h2>\r\n\r\n  <div class=\"resources-container\">\r\n    <div *ngFor=\"let classroom of classrooms\" class=\"classroom-section\">\r\n      <h3>{{ classroom.name }}</h3>\r\n      <div *ngFor=\"let resource of getResourcesByClassroomId(classroom.id)\" class=\"resource-card\">\r\n        <strong>Name:</strong> {{ resource.name }}<br>\r\n        <strong>Description:</strong> {{ resource.description }}<br>\r\n        <strong>Code:</strong> {{ resource.code }}<br>\r\n        <button (click)=\"showView('edit', resource)\">Edit</button>\r\n        <button (click)=\"deleteResource(resource.id)\">Delete</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"currentView === 'create'\">\r\n  <div class=\"resource-card\">\r\n    <h3>Add New Resource</h3>\r\n    <form (ngSubmit)=\"addResource()\">\r\n      <label for=\"name\">Name:</label>\r\n      <input type=\"text\" id=\"name\" name=\"name\" [(ngModel)]=\"newResource.name\" required>\r\n\r\n      <label for=\"description\">Description:</label>\r\n      <textarea id=\"description\" name=\"description\" [(ngModel)]=\"newResource.description\" required></textarea>\r\n\r\n      <label for=\"code\">Code:</label>\r\n      <input type=\"text\" id=\"code\" name=\"code\" [(ngModel)]=\"newResource.code\" required>\r\n\r\n      <label for=\"classroomId\">Classroom:</label>\r\n      <select id=\"classroomId\" [(ngModel)]=\"newResource.selectedClassroomId\" name=\"classroomId\">\r\n        <option *ngFor=\"let classroom of classrooms\" [ngValue]=\"classroom.id\">{{ classroom.name }}</option>\r\n      </select>\r\n\r\n      <button type=\"submit\">Add Resource</button>\r\n    </form>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"currentView === 'edit'\">\r\n  <div class=\"resource-card\">\r\n    <p>Edit Resource View</p>\r\n    <form *ngIf=\"selectedResource\" (ngSubmit)=\"updateResource(selectedResource.id, selectedResource)\">\r\n      <label for=\"name\">Name:</label>\r\n      <input type=\"text\" id=\"name\" name=\"name\" [(ngModel)]=\"selectedResource.name\" required>\r\n\r\n      <label for=\"description\">Description:</label>\r\n      <textarea id=\"description\" name=\"description\" [(ngModel)]=\"selectedResource.description\" required></textarea>\r\n\r\n      <label for=\"code\">Code:</label>\r\n      <input type=\"text\" id=\"code\" name=\"code\" [(ngModel)]=\"selectedResource.code\" required>\r\n\r\n      <button type=\"submit\">Save Changes</button>\r\n    </form>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}